<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Semantic Signal LLM</title>
    <link rel="stylesheet" href="style.css?v=4.4">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>
</head>
<body>
    <div id="app-container">
        <aside id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">üß†</span>
                    <div>
                        <h1>SEMANTIC<span class="highlight">SIGNAL</span> LLM</h1>
                        <div class="subtitle">LLM-POWERED NEURAL ENGINE</div>
                    </div>
                </div>
                <button id="mobile-menu-close" class="icon-btn-xs mobile-close-btn" aria-label="Close menu">‚úï</button>
            </div>

            <nav class="sidebar-nav" role="tablist" aria-label="Dashboard Navigation">
                <a href="#" class="nav-item active" data-target="tab-overview" role="tab" aria-selected="true" aria-controls="tab-overview" id="nav-overview">
                    <span class="icon" aria-hidden="true">üìä</span> Overview
                </a>
                <a href="#" class="nav-item" data-target="tab-brain" role="tab" aria-selected="false" aria-controls="tab-brain" id="nav-brain">
                    <span class="icon" aria-hidden="true">üï∏Ô∏è</span> Brain Activity
                </a>
                <a href="#" class="nav-item" data-target="tab-prompt" role="tab" aria-selected="false" aria-controls="tab-prompt" id="nav-prompt">
                    <span class="icon" aria-hidden="true">üí¨</span> Last Prompt
                </a>
                <a href="#" class="nav-item" data-target="tab-response" role="tab" aria-selected="false" aria-controls="tab-response" id="nav-response">
                    <span class="icon" aria-hidden="true">üìù</span> Last Response
                </a>
                <a href="#" class="nav-item" data-target="tab-stats" role="tab" aria-selected="false" aria-controls="tab-stats" id="nav-stats">
                    <span class="icon" aria-hidden="true">üìä</span> Statistics
                </a>
                <a href="#" class="nav-item" data-target="tab-news" role="tab" aria-selected="false" aria-controls="tab-news" id="nav-news">
                    <span class="icon" aria-hidden="true">üì∞</span> Latest News
                </a>
                <a href="#" class="nav-item" data-target="tab-market" role="tab" aria-selected="false" aria-controls="tab-market" id="nav-market">
                    <span class="icon" aria-hidden="true">üìà</span> Market Data
                </a>
                <a href="#" class="nav-item" data-target="tab-memory" role="tab" aria-selected="false" aria-controls="tab-memory" id="nav-memory">
                    <span class="icon" aria-hidden="true">üíæ</span> Memory Bank
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="status-indicator" role="status" aria-live="polite">
                    <div class="status-dot" aria-hidden="true"></div>
                    <span id="connection-status">Connecting...</span>
                </div>
                <!-- Hidden legacy fields for main.js compatibility -->
                <!-- Legacy fields removed. -->
                <div class="next-update">
                    <span class="label">Next Analysis</span>
                    <span id="next-analysis" class="value">--:--</span>
                </div>
                
                <div class="contact-list">
                    <a href="mailto:contact@qrak.org" class="contact-item" aria-label="Email contact">
                        <span class="icon">‚úâÔ∏è</span>
                        <span>contact@qrak.org</span>
                    </a>
                    <a href="https://github.com/qrak" target="_blank" rel="noopener noreferrer" class="contact-item" aria-label="GitHub profile">
                        <span class="icon">üêô</span>
                        <span>github.com/qrak</span>
                    </a>
                    <a href="https://discord.gg/ZC48aTTqR2" target="_blank" rel="noopener noreferrer" class="contact-item" aria-label="Discord server">
                        <span class="icon">üí¨</span>
                        <span>Discord Community</span>
                    </a>
                </div>
            </div>
        </aside>

        <main id="content-area">
            <!-- Mobile Header (visible only on mobile) -->
            <div id="mobile-header">
                <button id="mobile-menu-toggle" class="icon-btn-xs" aria-label="Open menu">‚ò∞</button>
            </div>

            <!-- Tab: Overview -->
            <div id="tab-overview" class="tab-content active" role="tabpanel" aria-labelledby="nav-overview">
                <header class="tab-header">
                    <h2>Live Dashboard</h2>
                    <span id="last-updated" style="font-size: 12px; color: var(--text-muted);">Updated: --</span>
                </header>

                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="label">Market Trend</div>
                        <div class="value" id="overview-trend" aria-live="polite">--</div>
                    </div>
                    <div class="kpi-card">
                        <div class="label">Confidence</div>
                        <div class="value highlight" id="overview-conf" aria-live="polite">--%</div>
                        <div class="sub-label" id="overview-action" aria-live="polite">WAITING</div>
                    </div>
                    <div class="kpi-card">
                        <div class="label">Active Rules</div>
                        <div class="value" id="overview-rules-count" aria-live="polite">0</div>
                        <div class="sub-label" id="overview-rules-hint" style="font-size: 10px;">No rules learned yet</div>
                    </div>
                    <div class="kpi-card">
                        <div class="label">Session Cost</div>
                        <div class="value" id="overview-cost">$0.00</div>

                    </div>
                </div>

                <section id="panel-performance" class="panel full-height-panel">
                    <div class="panel-header">
                        <h3>Performance Metrics</h3>
                        <div class="controls">
                            <span id="stats-summary" class="stats-summary-text">Loading stats...</span>

                        </div>
                    </div>
                    <div id="performance-chart" class="chart-container"></div>
                </section>
            </div>

            <!-- Tab: Brain Activity -->
            <div id="tab-brain" class="tab-content" role="tabpanel" aria-labelledby="nav-brain">
                <header class="tab-header">
                    <h2>Neural Network State</h2>
                </header>

                <div class="stack-layout">
                    <section id="panel-synapses" class="panel large-panel">
                        <div class="panel-header">
                            <h3>Synaptic Pathways</h3>
                            <div class="legend">
                                <span class="dot buy"></span> BUY
                                <span class="dot close"></span> CLOSE
                                <span class="dot update"></span> UPDATE
                            </div>
                        </div>
                        <div id="synapse-network" class="network-container"></div>
                    </section>
                    
                    <section id="panel-visuals" class="panel visual-panel">
                        <div class="panel-header">
                            <h3>Visual Cortex Input</h3>
                            <div class="controls panel-toolbar panel-controls">

                                <button class="toolbar-btn" onclick="togglePanelMinimize('panel-visuals')" title="Minimize" aria-label="Minimize visual panel">‚àí</button>
                                <button class="toolbar-btn" onclick="openLightbox(document.getElementById('analysis-chart').src)" title="Fullscreen" aria-label="Fullscreen chart">‚õ∂</button>
                            </div>
                        </div>
                        <div id="visual-container" class="visual-box">
                            <img id="analysis-chart" src="" alt="No chart generated" style="display: none;">
                            <span id="no-chart-msg">No visual data available</span>
                        </div>
                    </section>
                </div>
            </div>

            <!-- Tab: Last Prompt -->
            <div id="tab-prompt" class="tab-content" role="tabpanel" aria-labelledby="nav-prompt">
                <header class="tab-header">
                    <h2>Last Prompt</h2>

                </header>
                <section class="panel full-height-panel">
                    <div class="panel-header">
                        <h3>Trading Context Sent to LLM</h3>
                        <div class="controls">
                            <span id="prompt-meta" class="meta-info"></span>
                            <button onclick="copyPromptContent()">üìã Copy</button>
                        </div>
                    </div>
                    <div id="prompt-viewer" class="discord-content">Loading...</div>
                </section>
            </div>

            <!-- Tab: Last Response -->
            <div id="tab-response" class="tab-content" role="tabpanel" aria-labelledby="nav-response">
                <header class="tab-header">
                    <h2>Last Response</h2>

                </header>
                <section class="panel full-height-panel">
                    <div class="panel-header">
                        <h3>LLM Analysis Output</h3>
                        <div class="controls">
                            <span id="response-meta" class="meta-info"></span>
                            <button onclick="copyResponseContent()">üìã Copy</button>
                        </div>
                    </div>
                    <div id="response-viewer" class="discord-content">Loading...</div>
                </section>
            </div>

            <!-- Tab: Statistics -->
            <div id="tab-stats" class="tab-content" role="tabpanel" aria-labelledby="nav-stats">
                <header class="tab-header">
                    <h2>Trading Statistics</h2>

                </header>
                <div id="statistics-content">
                    <div class="empty-state">Loading statistics...</div>
                </div>
            </div>

            <!-- Tab: Latest News -->
            <div id="tab-news" class="tab-content" role="tabpanel" aria-labelledby="nav-news">
                <header class="tab-header">
                    <h2>Latest Crypto News</h2>

                </header>
                <div id="news-content">
                    <div class="empty-state">Loading news...</div>
                </div>
            </div>

            <!-- Tab: Market Data -->
            <div id="tab-market" class="tab-content" role="tabpanel" aria-labelledby="nav-market">
                <header class="tab-header">
                    <h2>Active Market Position</h2>

                </header>
                
                <section id="panel-position" class="panel">
                    <div class="panel-header">
                        <h3>Position Details</h3>
                    </div>
                    <div id="position-content" class="position-details-container">
                        <div class="no-position">
                            <span class="no-position-icon">üì≠</span>
                            <span>No active positions</span>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Tab: Memory Bank -->
            <div id="tab-memory" class="tab-content" role="tabpanel" aria-labelledby="nav-memory">
                <header class="tab-header">
                    <h2>Vector Experience Database</h2>

                </header>

                <section id="panel-vectors" class="panel full-height-panel">
                    <div id="vector-content">
                        <div class="empty-state">Loading vector database...</div>
                    </div>
                </section>
            </div>

        </main>
    </div>

    <script type="module" src="main.js?v=4.3"></script>
    
    <script>
        // No inline scripts needed. main.js handles all logic.
    </script>
</body>
</html>