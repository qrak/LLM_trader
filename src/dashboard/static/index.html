<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Semantic Signal LLM</title>
    <meta name="description" content="Semantic Signal LLM Dashboard for Crypto Trading Neural Engine">
    <meta property="og:title" content="Semantic Signal LLM">
    <meta property="og:description" content="Semantic Signal LLM Dashboard for Crypto Trading Neural Engine">
    <link rel="stylesheet" href="style.css?v=5.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>
</head>
<body>
    <a href="#content-area" class="skip-link">Skip to main content</a>
    <div id="app-container">
        <aside id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon"><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg></span>
                    <div>
                        <h1>SEMANTIC<span class="highlight">SIGNAL</span> LLM</h1>
                        <div class="subtitle">LLM-POWERED NEURAL ENGINE</div>
                    </div>
                </div>
                <button id="mobile-menu-close" class="icon-btn-xs mobile-close-btn" aria-label="Close menu"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></button>
            </div>

            <div class="sidebar-nav" role="tablist" aria-label="Dashboard Navigation">
                <span class="tab-btn active" data-target="tab-overview" role="tab" aria-selected="true" aria-controls="tab-overview" id="nav-overview" tabindex="0">
                    <span class="icon" aria-hidden="true"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="20" x2="12" y2="10"/><line x1="18" y1="20" x2="18" y2="4"/><line x1="6" y1="20" x2="6" y2="16"/></svg></span> Overview
                </span>
                <span class="tab-btn" data-target="tab-brain" role="tab" aria-selected="false" aria-controls="tab-brain" id="nav-brain" tabindex="0">
                    <span class="icon" aria-hidden="true"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/></svg></span> Brain Activity
                </span>
                <span class="tab-btn" data-target="tab-prompt" role="tab" aria-selected="false" aria-controls="tab-prompt" id="nav-prompt" tabindex="0">
                    <span class="icon" aria-hidden="true"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></span> Last Prompt
                </span>
                <span class="tab-btn" data-target="tab-response" role="tab" aria-selected="false" aria-controls="tab-response" id="nav-response" tabindex="0">
                    <span class="icon" aria-hidden="true"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg></span> Last Response
                </span>
                <span class="tab-btn" data-target="tab-stats" role="tab" aria-selected="false" aria-controls="tab-stats" id="nav-stats" tabindex="0">
                    <span class="icon" aria-hidden="true"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg></span> Statistics
                </span>
                <span class="tab-btn" data-target="tab-news" role="tab" aria-selected="false" aria-controls="tab-news" id="nav-news" tabindex="0">
                    <span class="icon" aria-hidden="true"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"/><path d="M18 14h-8"/><path d="M15 18h-5"/><path d="M10 6h8v4h-8V6Z"/></svg></span> Latest News
                </span>
                <span class="tab-btn" data-target="tab-market" role="tab" aria-selected="false" aria-controls="tab-market" id="nav-market" tabindex="0">
                    <span class="icon" aria-hidden="true"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 6h13"/><path d="M8 12h13"/><path d="M8 18h13"/><path d="M3 6h.01"/><path d="M3 12h.01"/><path d="M3 18h.01"/></svg></span> Market Data
                </span>
                <span class="tab-btn" data-target="tab-memory" role="tab" aria-selected="false" aria-controls="tab-memory" id="nav-memory" tabindex="0">
                    <span class="icon" aria-hidden="true"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/></svg></span> Memory Bank
                </span>
            </div>

            <div class="sidebar-footer">
                <div class="status-indicator" role="status" aria-live="polite">
                    <div class="status-dot" aria-hidden="true"></div>
                    <span id="connection-status">Connecting…</span>
                </div>
                <!-- Hidden legacy fields for main.js compatibility -->
                <!-- Legacy fields removed. -->
                <div class="next-update">
                    <span class="label">Next Analysis</span>
                    <span id="next-analysis" class="value">--:--</span>
                </div>
                
                <div class="contact-list">
                    <span onclick="window.location.href='mailto:contact@qrak.org'" class="contact-item" aria-label="Email contact" style="cursor: pointer;">
                        <span class="icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg></span>
                        <span>contact@qrak.org</span>
                    </span>
                    <span onclick="window.open('https://github.com/qrak', '_blank')" class="contact-item" aria-label="GitHub profile" style="cursor: pointer;">
                        <span class="icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg></span>
                        <span>github.com/qrak</span>
                    </span>
                    <span onclick="window.open('https://discord.gg/ZC48aTTqR2', '_blank')" class="contact-item" aria-label="Discord server" style="cursor: pointer;">
                        <span class="icon"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></span>
                        <span>Discord Community</span>
                    </span>
                </div>
            </div>
        </aside>

        <main id="content-area">
            <!-- Mobile Header (visible only on mobile) -->
            <div id="mobile-header">
                <button id="mobile-menu-toggle" class="icon-btn-xs" aria-label="Open menu"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" y1="6" x2="20" y2="6"/><line x1="4" y1="12" x2="20" y2="12"/><line x1="4" y1="18" x2="20" y2="18"/></svg></button>
            </div>

            <!-- Tab: Overview -->
            <div id="tab-overview" class="tab-content active" role="tabpanel" aria-labelledby="nav-overview">
                <header class="tab-header">
                    <h2>Live Dashboard</h2>
                    <span id="last-updated" style="font-size: 12px; color: var(--text-muted);">Updated: --</span>
                </header>

                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="label">Market Trend</div>
                        <div class="value" id="overview-trend" aria-live="polite">--</div>
                    </div>
                    <div class="kpi-card">
                        <div class="label">Confidence</div>
                        <div class="value highlight" id="overview-conf" aria-live="polite">--%</div>
                        <div class="sub-label" id="overview-action" aria-live="polite">WAITING</div>
                    </div>
                    <div class="kpi-card">
                        <div class="label">Active Rules</div>
                        <div class="value" id="overview-rules-count" aria-live="polite">0</div>
                        <div class="sub-label" id="overview-rules-hint" style="font-size: 10px;">No rules learned yet</div>
                    </div>
                    <div class="kpi-card">
                        <div class="label">Session Cost</div>
                        <div class="value" id="overview-cost">$0.00</div>

                    </div>
                </div>

                <section id="panel-performance" class="panel full-height-panel">
                    <div class="panel-header">
                        <h3>Performance Metrics</h3>
                        <div class="controls">
                            <span id="stats-summary" class="stats-summary-text"><span class="spinner spinner-sm"></span> Loading stats…</span>

                        </div>
                    </div>
                    <div id="performance-chart" class="chart-container"></div>
                </section>
            </div>

            <!-- Tab: Brain Activity -->
            <div id="tab-brain" class="tab-content" role="tabpanel" aria-labelledby="nav-brain">
                <header class="tab-header">
                    <h2>Neural Network State</h2>
                </header>

                <div class="stack-layout">
                    <section id="panel-synapses" class="panel large-panel">
                        <div class="panel-header">
                            <h3>Synaptic Pathways</h3>
                            <div class="legend">
                                <span class="dot buy"></span> BUY
                                <span class="dot close"></span> CLOSE
                                <span class="dot update"></span> UPDATE
                            </div>
                        </div>
                        <div id="synapse-network" class="network-container"></div>
                    </section>
                    
                    <section id="panel-visuals" class="panel visual-panel">
                        <div class="panel-header">
                            <h3>Visual Cortex Input</h3>
                            <div class="controls panel-toolbar panel-controls">

                                <button class="toolbar-btn" id="btn-minimize-visuals" title="Minimize" aria-label="Minimize visual panel">−</button>
                                <button class="toolbar-btn" id="btn-lightbox-visuals" title="Fullscreen" aria-label="Fullscreen chart">⛶</button>
                            </div>
                        </div>
                        <div id="visual-container" class="visual-box">
                            <img id="analysis-chart" src="" alt="No chart generated" width="800" height="450" style="display: none;">
                            <span id="no-chart-msg">No visual data available</span>
                        </div>
                    </section>
                </div>
            </div>

            <!-- Tab: Last Prompt -->
            <div id="tab-prompt" class="tab-content" role="tabpanel" aria-labelledby="nav-prompt">
                <header class="tab-header">
                    <h2>Last Prompt</h2>

                </header>
                <section class="panel full-height-panel">
                    <div class="panel-header">
                        <h3>Trading Context Sent to LLM</h3>
                        <div class="controls">
                            <span id="prompt-meta" class="meta-info"></span>
                            <button id="btn-copy-prompt" class="copy-btn" aria-label="Copy prompt to clipboard"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: -2px; margin-right: 4px;"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>Copy</button>
                        </div>
                    </div>
                    <div id="prompt-viewer" class="discord-content">
                        <div class="empty-state">
                            <div class="spinner"></div>
                            <div class="empty-state-text">Loading trading context…</div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Tab: Last Response -->
            <div id="tab-response" class="tab-content" role="tabpanel" aria-labelledby="nav-response">
                <header class="tab-header">
                    <h2>Last Response</h2>

                </header>
                <section class="panel full-height-panel">
                    <div class="panel-header">
                        <h3>LLM Analysis Output</h3>
                        <div class="controls">
                            <span id="response-meta" class="meta-info"></span>
                            <button id="btn-copy-response" class="copy-btn" aria-label="Copy response to clipboard"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: -2px; margin-right: 4px;"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>Copy</button>
                        </div>
                    </div>
                    <div id="response-viewer" class="discord-content">
                        <div class="empty-state">
                            <div class="spinner"></div>
                            <div class="empty-state-text">Loading analysis output…</div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Tab: Statistics -->
            <div id="tab-stats" class="tab-content" role="tabpanel" aria-labelledby="nav-stats">
                <header class="tab-header">
                    <h2>Trading Statistics</h2>

                </header>
                <div id="statistics-content">
                    <div class="empty-state">
                        <div class="spinner"></div>
                        <div class="empty-state-text">Loading trading statistics…</div>
                    </div>
                </div>
            </div>

            <!-- Tab: Latest News -->
            <div id="tab-news" class="tab-content" role="tabpanel" aria-labelledby="nav-news">
                <header class="tab-header">
                    <h2>Latest Crypto News</h2>

                </header>
                <div id="news-content">
                    <div class="empty-state">
                        <div class="spinner"></div>
                        <div class="empty-state-text">Loading latest news…</div>
                    </div>
                </div>
            </div>

            <!-- Tab: Market Data -->
            <div id="tab-market" class="tab-content" role="tabpanel" aria-labelledby="nav-market">
                <header class="tab-header">
                    <h2>Active Market Position</h2>

                </header>
                
                <section id="panel-position" class="panel">
                    <div class="panel-header">
                        <h3>Position Details</h3>
                    </div>
                    <div id="position-content" class="position-details-container">
                        <div class="no-position">
                            <span class="no-position-icon"><svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-6l-2 3h-4l-2-3H2"/><path d="M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"/></svg></span>
                            <span>No active positions</span>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Tab: Memory Bank -->
            <div id="tab-memory" class="tab-content" role="tabpanel" aria-labelledby="nav-memory">
                <header class="tab-header">
                    <h2>Vector Experience Database</h2>

                </header>

                <section id="panel-vectors" class="panel full-height-panel">
                    <div id="vector-content">
                        <div class="empty-state">
                            <div class="spinner"></div>
                            <div class="empty-state-text">Loading vector database…</div>
                        </div>
                    </div>
                </section>
            </div>

        </main>
    </div>

    <script type="module" src="main.js?v=5.0"></script>
</body>
</html>