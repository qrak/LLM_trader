[01/13/26 22:34:54] INFO     Initializing VectorMemoryService...                                                                                                 vector_memory.py:58
[01/13/26 22:34:56] INFO     VectorMemoryService initialized: 4 experiences stored                                                                               vector_memory.py:76
================================================================================
TEST 1: Semantic Search - Similar Experience Retrieval
================================================================================
[OK] Found 3 similar experiences
  1. [43% match] LOSS -0.29%
     Reasoning: Bitcoin confirmed the 200-SMA support at $89.2k with a Stochastic bull cross and...
  2. [43% match] WIN +2.87%
     Reasoning: Bitcoin has cleared the 50-SMA resistance with a MACD zero-cross and significant...
  3. [44% match] LOSS -2.50%
     Reasoning: Bitcoin has confirmed a higher low at $91.2k and is benefiting from a fresh Gold...

================================================================================
TEST 2: Brain Context Generation
================================================================================
[OK] Brain context generated (1715 chars)
[OK] No N/A reasoning in context
[OK] Key Insights are being injected into prompts

--- Sample Context Output ---

## TRADING BRAIN (3 closed trades)

CONFIDENCE CALIBRATION:
- HIGH Confidence: Win Rate 33% (1/3 trades) | Avg P&L: +0.03%

RELEVANT PAST EXPERIENCES (Context: BULLISH + High ADX + MEDIUM Volatility + MACD BULLISH):

1. [SIMILARITY 52%] LONG trade
   - Result: WIN (+2.87%)
   - Context: Uptrend + Weak Trend + Low Vol
   - Key Insight: "Bitcoin has cleared the 50-SMA resistance with a MACD zero-cross and significant buy-side order book imbalance (+0.639). The TTM Squeeze indicates an imminent high-volatility expansion following a period of compression."

2. [SIMILARITY 46%] LONG trade
   - Result: LOSS (-0.29%)
   - Context: Sideways + Weak Trend + Low Vol
   - Key Insight: "Bitcoin confirmed the 200-SMA support at $89.2k with a Stochastic bull cross and a TD9 buy signal, suggesting a high...

================================================================================
TEST 3: get_context_for_prompt direct check
================================================================================
[OK] Prompt context generated (1079 chars)
[OK] Key Insights present with real reasoning

--- Prompt Context ---
RELEVANT PAST EXPERIENCES (Context: Uptrend + Weak Trend):

1. [SIMILARITY 50%] LONG trade
   - Result: WIN (+2.87%)
   - Context: Uptrend + Weak Trend + Low Vol
   - Key Insight: "Bitcoin has cleared the 50-SMA resistance with a MACD zero-cross and significant buy-side order book imbalance (+0.639). The TTM Squeeze indicates an imminent high-volatility expansion following a period of compression."

2. [SIMILARITY 44%] LONG trade
   - Result: LOSS (-2.50%)
   - Context: Downtrend + Strong Trend + Low Vol
   - Key Insight: "Bitcoin has confirmed a higher low at $91.2k and is benefiting from a fresh Golden Cross and strong institutional accumulation (CMF 0.18). The market has flushed out liquidations and is now poised to challenge the $94.8k resistance for a breakout toward $98k."

3. [SIMILARITY 42%] LONG trade
   - Result: LOSS (-0.29%)
   - Context: Sideways + Weak Trend + Low Vol
   - Key Insight: "Bitcoin confirmed the 200-SMA support at $89.2k with a Stochastic bull cross and a TD9 buy signal, suggesting a high-probability mean-reversion move toward $94.8k."


================================================================================
ALL TESTS COMPLETE
================================================================================
